<workdayEntityConfigurationTemplate>
  <scenario name="GetTimeOffBalance">
    <apiRequests>
      <apiRequest>
        <authType>User</authType>
        <endpoint>
          <request>Template_GetTimeOffBalances_Request</request>
          <serviceName>Absence_Management</serviceName>
          <version>v42.0</version>
        </endpoint>

        <requestParameters>
          <parameter>
            <name>Employee_ID</name>
            <value>{Employee_ID}</value>
          </parameter>
        </requestParameters>

        <responseProperties>
  <!-- Remaining balance -->
  <property>
    <key>RemainingBalance</key>
    <extractPath>
      //*[local-name()='Time_Off_Plan_Balance_Record']
      /*[local-name()='Time_Off_Plan_Balance_Position_Record']
      /*[local-name()='Time_Off_Plan_Balance']/text()
    </extractPath>
  </property>

  <!-- Plan descriptor -->
  <property>
    <key>PlanDescriptor</key>
    <extractPath>
      //*[local-name()='Time_Off_Plan_Balance_Record']
      /*[local-name()='Time_Off_Plan_Reference']/@*[local-name()='Descriptor']
    </extractPath>
  </property>

  <!-- Plan ID (Absence_Plan_ID) -->
  <property>
    <key>PlanID</key>
    <extractPath>
      //*[local-name()='Time_Off_Plan_Balance_Record']
      /*[local-name()='Time_Off_Plan_Reference']
      /*[local-name()='ID'][@*[local-name()='type']='Absence_Plan_ID']/text()
    </extractPath>
  </property>

  <!-- Unit of Time -->
  <property>
    <key>UnitOfTime</key>
    <extractPath>
      //*[local-name()='Time_Off_Plan_Balance_Record']
      /*[local-name()='Unit_of_Time_Reference']/@*[local-name()='Descriptor']
    </extractPath>
  </property>
</responseProperties>
      </apiRequest>
    </apiRequests>
  </scenario>

  <requestTemplates>
    <requestTemplate name="msdyn_HRWorkdayHCMEmployeeGetVacationBalance">
      <bsvc:Get_Time_Off_Plan_Balances_Request xmlns:bsvc="urn:com.workday/bsvc" bsvc:version="v42.0">
        
        <!-- Request Criteria -->
        <bsvc:Request_Criteria>
          <bsvc:Employee_Reference>
            <bsvc:ID bsvc:type="Employee_ID">{Employee_ID}</bsvc:ID>
          </bsvc:Employee_Reference>
        </bsvc:Request_Criteria>
        
        <!-- Response Filter (pagination) -->
        <bsvc:Response_Filter>
          <bsvc:Page>1</bsvc:Page>
          <bsvc:Count>100</bsvc:Count>
        </bsvc:Response_Filter>

      </bsvc:Get_Time_Off_Plan_Balances_Request>
    </requestTemplate>
  </requestTemplates>
</workdayEntityConfigurationTemplate>